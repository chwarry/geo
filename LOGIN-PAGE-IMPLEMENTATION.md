# ç™»å½•é¡µé¢å®ç°æ–‡æ¡£

## âœ… å·²å®Œæˆ

ç™»å½•é¡µé¢å·²å®Œæˆå¹¶å¯¹æ¥çœŸå®çš„åç«¯APIã€‚

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

### é¡µé¢è·¯ç”±
- `/` - ç™»å½•é¡µï¼ˆé»˜è®¤é¦–é¡µï¼‰
- `/login` - ç™»å½•é¡µ

### ç™»å½•æ¥å£ï¼ˆçœŸå®APIï¼‰
```
POST /api/auth/login
Content-Type: application/json

è¯·æ±‚ä½“ï¼š
{
  "username": "admin",
  "password": "password123"
}

å“åº”ï¼š
{
  "resultcode": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "username": "admin",
    "userId": 1,
    "roles": ["ROLE_ADMIN"]
  }
}
```

## ğŸ¨ UIè®¾è®¡

### é¡µé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                          â”‚
â”‚              [Logoå›¾æ ‡]                  â”‚
â”‚         è¶…å‰åœ°è´¨é¢„æŠ¥ç³»ç»Ÿ                  â”‚
â”‚  Advanced Geological Forecast System    â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸ‘¤ [ç”¨æˆ·åè¾“å…¥æ¡†]               â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸ”’ [å¯†ç è¾“å…¥æ¡†]                 â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                          â”‚
â”‚  â˜‘ï¸ è®°ä½ç”¨æˆ·å                           â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚         [ç™»å½•æŒ‰é’®]              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                          â”‚
â”‚    å¿˜è®°å¯†ç ï¼Ÿ  |  ç”³è¯·è´¦å·                â”‚
â”‚                                          â”‚
â”‚      æµ‹è¯•è´¦å·ï¼šadmin / password123       â”‚
â”‚            Version 1.0.0                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®¾è®¡ç‰¹ç‚¹
1. **æ¸å˜èƒŒæ™¯**ï¼šç´«è‰²æ¸å˜ (#667eea â†’ #764ba2)
2. **åŠ¨æ€èƒŒæ™¯**ï¼šç‚¹çŠ¶ç½‘æ ¼åŠ¨ç”»
3. **å¡ç‰‡é˜´å½±**ï¼š3Dé˜´å½±æ•ˆæœ
4. **åœ†è§’è®¾è®¡**ï¼šç°ä»£åŒ–åœ†è§’é£æ ¼
5. **æ¸å˜æŒ‰é’®**ï¼šä¸ä¸»é¢˜è‰²ä¸€è‡´çš„æ¸å˜æŒ‰é’®
6. **å“åº”å¼å¸ƒå±€**ï¼šå±…ä¸­å¯¹é½ï¼Œè‡ªé€‚åº”

## ğŸ”§ æŠ€æœ¯å®ç°

### ç»„ä»¶ç»“æ„
```typescript
LoginPage
â”œâ”€â”€ èƒŒæ™¯å±‚ï¼ˆæ¸å˜ + åŠ¨ç”»ç½‘æ ¼ï¼‰
â””â”€â”€ ç™»å½•å¡ç‰‡
    â”œâ”€â”€ Logoå’Œæ ‡é¢˜
    â”œâ”€â”€ ç™»å½•è¡¨å•
    â”‚   â”œâ”€â”€ ç”¨æˆ·åè¾“å…¥æ¡†
    â”‚   â”œâ”€â”€ å¯†ç è¾“å…¥æ¡†
    â”‚   â”œâ”€â”€ è®°ä½ç”¨æˆ·åå¤é€‰æ¡†
    â”‚   â””â”€â”€ ç™»å½•æŒ‰é’®
    â”œâ”€â”€ åº•éƒ¨é“¾æ¥ï¼ˆå¿˜è®°å¯†ç ã€ç”³è¯·è´¦å·ï¼‰
    â””â”€â”€ ç‰ˆæœ¬ä¿¡æ¯
```

### è¡¨å•å­—æ®µ
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|-----|------|
| username | Input | âœ… | ç”¨æˆ·å |
| password | Input.Password | âœ… | å¯†ç  |
| remember | Checkbox | âŒ | è®°ä½ç”¨æˆ·å |

### è¡¨å•éªŒè¯
```typescript
{
  username: [
    { required: true, message: 'è¯·è¾“å…¥ç”¨æˆ·å' }
  ],
  password: [
    { required: true, message: 'è¯·è¾“å…¥å¯†ç ' }
  ]
}
```

## ğŸ“¡ APIå¯¹æ¥

### è¯·æ±‚å¤„ç†
```typescript
const response = await http.post<BaseResponse<LoginResponse>>(
  '/api/auth/login',
  {
    username: values.username,
    password: values.password
  }
)
```

### å“åº”å¤„ç†
```typescript
if (response.resultcode === 200 && response.data) {
  const { token, username, userId, roles } = response.data
  
  // å­˜å‚¨tokenå’Œç”¨æˆ·ä¿¡æ¯
  localStorage.setItem('token', token)
  localStorage.setItem('username', username)
  localStorage.setItem('userId', userId.toString())
  localStorage.setItem('roles', JSON.stringify(roles))
  
  // è·³è½¬åˆ°é¦–é¡µ
  navigate('/home')
}
```

### é”™è¯¯å¤„ç†
```typescript
catch (error: any) {
  console.error('âŒ ç™»å½•å¤±è´¥:', error)
  Message.error(error.message || 'ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç ')
}
```

## ğŸ” Tokenç®¡ç†

### Tokenå­˜å‚¨
ç™»å½•æˆåŠŸåï¼Œä»¥ä¸‹ä¿¡æ¯ä¼šå­˜å‚¨åœ¨`localStorage`ï¼š
- `token` - JWTä»¤ç‰Œ
- `username` - ç”¨æˆ·å
- `userId` - ç”¨æˆ·ID
- `roles` - ç”¨æˆ·è§’è‰²æ•°ç»„

### Tokenè‡ªåŠ¨é™„åŠ 
`http.ts`ä¸­çš„è¯·æ±‚æ‹¦æˆªå™¨ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ tokenï¼š
```typescript
http.interceptors.request.use((config) => {
  const token = localStorage.getItem('token')
  if (token) {
    config.headers.Authorization = `Bearer ${token}`
  }
  return config
})
```

## ğŸ’¾ è®°ä½ç”¨æˆ·ååŠŸèƒ½

### å®ç°é€»è¾‘
1. ç”¨æˆ·å‹¾é€‰"è®°ä½ç”¨æˆ·å"å¹¶ç™»å½•æˆåŠŸ
2. ç”¨æˆ·åä¿å­˜åˆ°`localStorage.rememberedUsername`
3. ä¸‹æ¬¡æ‰“å¼€é¡µé¢æ—¶è‡ªåŠ¨å¡«å……ç”¨æˆ·åå’Œå‹¾é€‰çŠ¶æ€

### ä»£ç å®ç°
```typescript
// ä¿å­˜
if (values.remember) {
  localStorage.setItem('rememberedUsername', values.username)
} else {
  localStorage.removeItem('rememberedUsername')
}

// æ¢å¤
useEffect(() => {
  const rememberedUsername = localStorage.getItem('rememberedUsername')
  if (rememberedUsername) {
    form.setFieldsValue({
      username: rememberedUsername,
      remember: true
    })
  }
}, [form])
```

## ğŸ¯ ç”¨æˆ·æµç¨‹

### æ­£å¸¸ç™»å½•æµç¨‹
```
1. ç”¨æˆ·è®¿é—® / æˆ– /login
   â†“
2. æ˜¾ç¤ºç™»å½•é¡µé¢
   â†“
3. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
   â†“
4. ç‚¹å‡»"ç™»å½•"æŒ‰é’®
   â†“
5. è°ƒç”¨ POST /api/auth/login
   â†“
6. æˆåŠŸï¼šä¿å­˜token â†’ è·³è½¬/home
   å¤±è´¥ï¼šæ˜¾ç¤ºé”™è¯¯æç¤º
```

### è‡ªåŠ¨ç™»å½•çŠ¶æ€æ¢å¤
```
1. ç”¨æˆ·è®¿é—®é¡µé¢
   â†“
2. æ£€æŸ¥localStorage.rememberedUsername
   â†“
3. å¦‚æœå­˜åœ¨ï¼Œè‡ªåŠ¨å¡«å……ç”¨æˆ·å
   â†“
4. ç”¨æˆ·åªéœ€è¾“å…¥å¯†ç 
```

## ğŸ”„ ä¸å…¶ä»–é¡µé¢çš„é›†æˆ

### è·¯ç”±é…ç½®
```typescript
const router = createBrowserRouter([
  {
    path: '/',
    element: <LoginPage />  // é»˜è®¤æ˜¾ç¤ºç™»å½•é¡µ
  },
  {
    path: '/login',
    element: <LoginPage />
  },
  {
    path: '/home',
    element: <HomePage />  // ç™»å½•åè·³è½¬
  },
  // ... å…¶ä»–é¡µé¢
])
```

### ç™»å½•åè·³è½¬
ç™»å½•æˆåŠŸå0.5ç§’å»¶è¿Ÿè·³è½¬åˆ° `/home`ï¼Œè®©ç”¨æˆ·çœ‹åˆ°æˆåŠŸæç¤ºã€‚

## ğŸŒŸ UIç‰¹æ€§

### 1. åŠ¨ç”»æ•ˆæœ
```css
@keyframes backgroundMove {
  0% { transform: translate(0, 0); }
  100% { transform: translate(50px, 50px); }
}
```
- èƒŒæ™¯ç½‘æ ¼ç¼“æ…¢ç§»åŠ¨åŠ¨ç”»
- 20ç§’å¾ªç¯

### 2. æ¸å˜è‰²
- **èƒŒæ™¯æ¸å˜**ï¼š`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`
- **LogoèƒŒæ™¯**ï¼šåŒæ ·çš„æ¸å˜
- **ç™»å½•æŒ‰é’®**ï¼šåŒæ ·çš„æ¸å˜

### 3. é˜´å½±æ•ˆæœ
```css
boxShadow: '0 20px 60px rgba(0, 0, 0, 0.3)'
```
- æ·±åº¦é˜´å½±ï¼Œå¢å¼ºå±‚æ¬¡æ„Ÿ

### 4. åœ†è§’è®¾è®¡
- å¡ç‰‡ï¼š16px
- Logoï¼š20px
- è¾“å…¥æ¡†ï¼š8px
- æŒ‰é’®ï¼š8px

## ğŸ“± å“åº”å¼è®¾è®¡

### å¡ç‰‡å°ºå¯¸
- å®½åº¦ï¼š420pxï¼ˆå›ºå®šï¼‰
- é«˜åº¦ï¼šè‡ªé€‚åº”å†…å®¹

### å¸ƒå±€
- å‚ç›´å’Œæ°´å¹³å±…ä¸­
- ä½¿ç”¨flexboxå¸ƒå±€

## ğŸ§ª æµ‹è¯•è´¦å·

### é»˜è®¤æµ‹è¯•è´¦å·
```
ç”¨æˆ·åï¼šadmin
å¯†ç ï¼špassword123
```

é¡µé¢åº•éƒ¨æ˜¾ç¤ºæµ‹è¯•è´¦å·ä¿¡æ¯ï¼Œæ–¹ä¾¿å¼€å‘å’Œæµ‹è¯•ã€‚

## âš™ï¸ é…ç½®è¯´æ˜

### APIä»£ç†
ç™»å½•æ¥å£é€šè¿‡`setupProxy.js`ä»£ç†åˆ°åç«¯ï¼š
```javascript
app.use('/api', createProxyMiddleware({
  target: 'http://121.40.127.120:8080',
  changeOrigin: true,
  pathRewrite: {
    '^/api': '/api/v1'
  }
}))
```

æ³¨æ„ï¼šè¯·æ±‚ `/api/auth/login` ä¼šè¢«ä»£ç†åˆ° `http://121.40.127.120:8080/api/v1/auth/login`

### ç¯å¢ƒå˜é‡
å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®APIåŸºç¡€URLï¼š
```
REACT_APP_API_BASE_URL=http://121.40.127.120:8080
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### 1. Tokenå­˜å‚¨
- ä½¿ç”¨localStorageå­˜å‚¨token
- è¯·æ±‚æ—¶è‡ªåŠ¨é™„åŠ åœ¨Authorizationå¤´

### 2. å¯†ç ä¿æŠ¤
- ä½¿ç”¨`Input.Password`ç»„ä»¶
- å¯†ç ä¸æ˜¾ç¤ºæ˜æ–‡
- æ—¥å¿—ä¸­å¯†ç æ˜¾ç¤ºä¸º`******`

### 3. HTTPS
- ç”Ÿäº§ç¯å¢ƒå»ºè®®å¯ç”¨HTTPS
- ä¿æŠ¤tokenå’Œå¯†ç ä¼ è¾“

## ğŸ› é”™è¯¯å¤„ç†

### ç½‘ç»œé”™è¯¯
```typescript
catch (error: any) {
  Message.error(error.message || 'ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç ')
}
```

### è®¤è¯å¤±è´¥
```typescript
if (response.resultcode !== 200) {
  Message.error(response.message || 'ç™»å½•å¤±è´¥')
}
```

### åŠ è½½çŠ¶æ€
```typescript
const [loading, setLoading] = useState(false)

// ç™»å½•æ—¶æ˜¾ç¤ºåŠ è½½çŠ¶æ€
<Button loading={loading}>ç™»å½•</Button>
```

## ğŸ“Š æ•°æ®ç±»å‹å®šä¹‰

### LoginRequest
```typescript
interface LoginRequest {
  username: string
  password: string
}
```

### LoginResponse
```typescript
interface LoginResponse {
  token: string
  username: string
  userId: number
  roles: string[]
}
```

### BaseResponse
```typescript
interface BaseResponse<T> {
  resultcode: number
  message: string
  data: T
}
```

## ğŸš€ åç»­ä¼˜åŒ–å»ºè®®

### 1. èº«ä»½éªŒè¯å®ˆå«
- æ·»åŠ è·¯ç”±å®ˆå«
- æœªç™»å½•ç”¨æˆ·è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ
- å·²ç™»å½•ç”¨æˆ·è®¿é—®ç™»å½•é¡µè‡ªåŠ¨è·³è½¬é¦–é¡µ

### 2. Tokenåˆ·æ–°
- å®ç°tokenè‡ªåŠ¨åˆ·æ–°æœºåˆ¶
- é¿å…é•¿æ—¶é—´ä½¿ç”¨æ—¶tokenè¿‡æœŸ

### 3. å¤šå› ç´ è®¤è¯
- æ”¯æŒéªŒè¯ç ç™»å½•
- æ”¯æŒæ‰‹æœºå·ç™»å½•
- æ”¯æŒé‚®ç®±ç™»å½•

### 4. å¯†ç å¼ºåº¦æ£€æŸ¥
- å®æ—¶æ£€æŸ¥å¯†ç å¼ºåº¦
- æç¤ºå¯†ç å®‰å…¨ç­‰çº§

### 5. ç™»å½•æ—¥å¿—
- è®°å½•ç™»å½•æ—¶é—´
- è®°å½•ç™»å½•IP
- è®°å½•ç™»å½•è®¾å¤‡

### 6. è´¦å·é”å®š
- å¤šæ¬¡å¤±è´¥åé”å®šè´¦å·
- éªŒè¯ç éªŒè¯

## âœ… åŠŸèƒ½æ¸…å•

- [x] ç™»å½•é¡µé¢UIè®¾è®¡
- [x] è¡¨å•éªŒè¯
- [x] APIå¯¹æ¥ï¼ˆçœŸå®åç«¯ï¼‰
- [x] Tokenå­˜å‚¨
- [x] Tokenè‡ªåŠ¨é™„åŠ 
- [x] è®°ä½ç”¨æˆ·å
- [x] ç™»å½•æˆåŠŸè·³è½¬
- [x] é”™è¯¯æç¤º
- [x] åŠ è½½çŠ¶æ€
- [x] æµ‹è¯•è´¦å·æç¤º
- [x] å¿˜è®°å¯†ç é“¾æ¥
- [x] ç”³è¯·è´¦å·é“¾æ¥
- [x] åŠ¨ç”»æ•ˆæœ
- [x] å“åº”å¼è®¾è®¡

## ğŸ‰ ä½¿ç”¨è¯´æ˜

### è®¿é—®ç™»å½•é¡µ
```
http://localhost:3000/
æˆ–
http://localhost:3000/login
```

### ç™»å½•
1. è¾“å…¥ç”¨æˆ·åï¼š`admin`
2. è¾“å…¥å¯†ç ï¼š`password123`
3. å¯é€‰ï¼šå‹¾é€‰"è®°ä½ç”¨æˆ·å"
4. ç‚¹å‡»"ç™»å½•"æŒ‰é’®
5. ç™»å½•æˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ°é¦–é¡µ

### é€€å‡ºç™»å½•
ç›®å‰éœ€è¦æ‰‹åŠ¨æ¸…é™¤localStorageæˆ–å…³é—­æµè§ˆå™¨ã€‚åç»­å¯ä»¥æ·»åŠ é€€å‡ºç™»å½•åŠŸèƒ½ã€‚

ç™»å½•é¡µé¢å·²å®Œæˆï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨çœŸå®çš„åç«¯APIè¿›è¡Œç™»å½•ï¼ğŸŠ


