# ç™»å½•APIè·¯å¾„ä¿®å¤æŒ‡å—

## ğŸ” é—®é¢˜ç¡®è®¤

**ç—‡çŠ¶**: æ‰€æœ‰APIè¯·æ±‚è¿”å› `resultcode: 2002`

**åŸå› **: ç™»å½•æ¥å£è·¯å¾„å¯èƒ½ä¸æ­£ç¡®

## ğŸ“‹ éœ€è¦ç¡®è®¤çš„ä¿¡æ¯

è¯·è®¿é—®Swagger UIå¹¶ç¡®è®¤ï¼š

### 1. è®¿é—®Swaggeræ–‡æ¡£
```
http://121.40.127.120:8080/swagger-ui/index.html
```

### 2. æŸ¥æ‰¾ç™»å½•æ¥å£

åœ¨Swagger UIä¸­æŸ¥æ‰¾ï¼š
- **"è®¤è¯æ¥å£"** æ ‡ç­¾
- **"ç”¨æˆ·ç®¡ç†"** æ ‡ç­¾  
- **"ç™»å½•"** ç›¸å…³çš„API

### 3. è®°å½•å®é™…çš„APIè·¯å¾„

å¯èƒ½çš„è·¯å¾„æ ¼å¼ï¼š
- `/api/login`
- `/api/user/login`
- `/api/v1/auth/login`
- `/api/v1/login`
- `/login`
- `/auth/login`

### 4. è®°å½•è¯·æ±‚å‚æ•°æ ¼å¼

æŸ¥çœ‹ç™»å½•æ¥å£éœ€è¦çš„å‚æ•°ï¼š
```json
{
  "username": "string",
  "password": "string"
}
```

æˆ–è€…å¯èƒ½æ˜¯ï¼š
```json
{
  "account": "string",
  "password": "string"
}
```

æˆ–è€…ï¼š
```json
{
  "loginName": "string",
  "pwd": "string"
}
```

## ğŸ”§ ä¿®å¤æ­¥éª¤

### ä¸€æ—¦ç¡®è®¤äº†æ­£ç¡®çš„è·¯å¾„ï¼Œä¿®æ”¹ä»¥ä¸‹æ–‡ä»¶ï¼š

#### 1. ä¿®æ”¹ `src/pages/LoginPage.tsx`

```typescript
// ç¬¬52è¡Œï¼Œä¿®æ”¹ç™»å½•APIè·¯å¾„
const response = await http.post<BaseResponse<LoginResponse>>(
  '/api/æ­£ç¡®çš„è·¯å¾„',  // â† ä¿®æ”¹è¿™é‡Œ
  {
    username: values.username,  // â† å¦‚æœå‚æ•°åä¸å¯¹ä¹Ÿè¦ä¿®æ”¹
    password: values.password
  }
)
```

#### 2. å¦‚æœå‚æ•°åä¸åŒï¼Œä¹Ÿéœ€è¦ä¿®æ”¹

ä¾‹å¦‚ï¼Œå¦‚æœåç«¯éœ€è¦ `account` è€Œä¸æ˜¯ `username`ï¼š

```typescript
const response = await http.post<BaseResponse<LoginResponse>>(
  '/api/æ­£ç¡®çš„è·¯å¾„',
  {
    account: values.username,    // â† æ”¹ä¸ºaccount
    password: values.password
  }
)
```

## ğŸ§ª æµ‹è¯•æ–¹æ³•

### æ–¹æ³•1: åœ¨Swagger UIä¸­æµ‹è¯•

1. æ‰¾åˆ°ç™»å½•æ¥å£
2. ç‚¹å‡» "Try it out"
3. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
4. ç‚¹å‡» "Execute"
5. æŸ¥çœ‹å“åº”

**æˆåŠŸçš„å“åº”åº”è¯¥æ˜¯**:
```json
{
  "resultcode": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "...",
    "username": "...",
    "userId": 1,
    "roles": [...]
  }
}
```

### æ–¹æ³•2: ä½¿ç”¨curlæµ‹è¯•

```bash
# æ›¿æ¢ä¸ºæ­£ç¡®çš„è·¯å¾„å’Œå‚æ•°
curl -X POST http://121.40.127.120:8080/api/æ­£ç¡®çš„è·¯å¾„ \
  -H "Content-Type: application/json" \
  -d '{"username":"ä½ çš„ç”¨æˆ·å","password":"ä½ çš„å¯†ç "}'
```

## ğŸ“ å¸¸è§çš„APIè·¯å¾„æ¨¡å¼

æ ¹æ®ç»éªŒï¼Œåç«¯ç™»å½•æ¥å£å¸¸è§çš„è·¯å¾„ï¼š

| è·¯å¾„ | å¯èƒ½æ€§ | è¯´æ˜ |
|------|--------|------|
| `/api/v1/auth/login` | â­â­â­ | RESTfulé£æ ¼ï¼Œå¸¦ç‰ˆæœ¬å· |
| `/api/auth/login` | â­â­â­ | RESTfulé£æ ¼ |
| `/api/login` | â­â­ | ç®€åŒ–è·¯å¾„ |
| `/api/user/login` | â­â­ | ç”¨æˆ·æ¨¡å—ä¸‹ |
| `/login` | â­ | æœ€ç®€è·¯å¾„ |

## ğŸ¯ ä¸‹ä¸€æ­¥

è¯·æ‚¨ï¼š

1. âœ… è®¿é—®Swagger UI
2. âœ… æ‰¾åˆ°ç™»å½•æ¥å£
3. âœ… å‘Šè¯‰æˆ‘æ­£ç¡®çš„è·¯å¾„å’Œå‚æ•°æ ¼å¼
4. âœ… æˆ‘ä¼šç«‹å³ä¿®æ”¹ä»£ç 

---

**é‡è¦**: `resultcode: 2002` é€šå¸¸è¡¨ç¤º"æ¥å£ä¸å­˜åœ¨"æˆ–"è·¯å¾„é”™è¯¯"ï¼Œæ‰€ä»¥ç¡®è®¤æ­£ç¡®çš„APIè·¯å¾„æ˜¯è§£å†³é—®é¢˜çš„å…³é”®ï¼
